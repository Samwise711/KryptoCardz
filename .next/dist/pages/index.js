'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _factory = require('../ethereum/factory');

var _factory2 = _interopRequireDefault(_factory);

var _semanticUiReact = require('semantic-ui-react');

var _LayoutSearch = require('../components/LayoutSearch');

var _LayoutSearch2 = _interopRequireDefault(_LayoutSearch);

var _routes = require('../routes');

var _web = require('../ethereum/web3');

var _web2 = _interopRequireDefault(_web);

var _SearchSortPart = require('../components/SearchSortPart');

var _SearchSortPart2 = _interopRequireDefault(_SearchSortPart);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _jsxFileName = 'C:\\Users\\Dan\\Downloads\\KryptoCardz\\Project\\pages\\index.js?entry';
//import Campaign from '../ethereum/campaign';
//import axios from 'axios';


// class based component

var CampaignIndex = function (_Component) {
  (0, _inherits3.default)(CampaignIndex, _Component);

  function CampaignIndex() {
    var _ref;

    var _temp, _this, _ret;

    (0, _classCallCheck3.default)(this, CampaignIndex);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = CampaignIndex.__proto__ || (0, _getPrototypeOf2.default)(CampaignIndex)).call.apply(_ref, [this].concat(args))), _this), _this.state = {
      searchValue: '',
      sortBy1: 'created',
      sortBy2: 'Low to high'
    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);
  }

  (0, _createClass3.default)(CampaignIndex, [{
    key: 'renderCampaigns',

    //dynamically compute route for description tag below
    value: function renderCampaigns() {
      var _state = this.state,
          sortBy1 = _state.sortBy1,
          sortBy2 = _state.sortBy2,
          searchValue = _state.searchValue;

      //const accounts = await web3.eth.getAccounts();
      //const ownerCards = await factory.methods.getCardsByOwner(accounts[0]).call();

      var items = this.props.allStructs.map(function (request, index) {
        return {

          image: _react2.default.createElement('img', { src: 'https://storage.googleapis.com/cryptocardz-c5066.appspot.com/' + (parseInt(request.Id) + 1) + '.png', width: '150', style: { marginLeft: '70px', marginTop: '15px', marginBottom: '15px', pointerEvents: 'none' }, __source: {
              fileName: _jsxFileName,
              lineNumber: 65
            }
          }),
          header: request.Name,
          meta: _web2.default.utils.fromWei(request.Price, 'ether') + " ETH",
          href: '/campaigns/' + request.Id,
          created: request.CreatedDate
          //fluid: true  // causes cards to go full width of frame
        };
      });
      items.sort(function (a, b) {
        if (a[sortBy1] > b[sortBy1]) return 1;
        if (a[sortBy1] < b[sortBy1]) return -1;
        if (a[sortBy1] === b[sortBy1]) return 0;
      });

      if (sortBy2 === 'High to low') items.reverse();

      if (searchValue !== '') {
        items = items.filter(function (item) {
          return item.header.toLowerCase().includes(searchValue.toLowerCase());
        });
      }

      return _react2.default.createElement(_semanticUiReact.Card.Group, { items: items, __source: {
          fileName: _jsxFileName,
          lineNumber: 88
        }
      });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var searchValue = this.state.searchValue;

      var searchHandler = function searchHandler(event) {
        return _this2.setState({ searchValue: event.target.value });
      };
      var sort1Handler = function sort1Handler(event, data) {
        return _this2.setState({ sortBy1: data.value });
      };
      var sort2Handler = function sort2Handler(event, data) {
        return _this2.setState({ sortBy2: data.value });
      };

      return _react2.default.createElement(_LayoutSearch2.default, {
        __source: {
          fileName: _jsxFileName,
          lineNumber: 100
        }
      }, _react2.default.createElement('div', { style: { marginTop: '25px' }, __source: {
          fileName: _jsxFileName,
          lineNumber: 101
        }
      }, _react2.default.createElement(_semanticUiReact.Message, {
        __source: {
          fileName: _jsxFileName,
          lineNumber: 102
        }
      }, _react2.default.createElement(_semanticUiReact.Message.Header, {
        __source: {
          fileName: _jsxFileName,
          lineNumber: 103
        }
      }, 'Site Requirements'), _react2.default.createElement('p', {
        __source: {
          fileName: _jsxFileName,
          lineNumber: 104
        }
      }, 'Please be using MetaMask and the Ropsten Test Net to interact with this application. Otherwise errors may be thrown.')), _react2.default.createElement('h3', {
        __source: {
          fileName: _jsxFileName,
          lineNumber: 108
        }
      }, 'Marketplace'), _react2.default.createElement(_semanticUiReact.Grid, {
        __source: {
          fileName: _jsxFileName,
          lineNumber: 111
        }
      }, _react2.default.createElement(_SearchSortPart2.default, {
        searchHandler: searchHandler,
        searchValue: searchValue,
        sort1Handler: sort1Handler,
        sort2Handler: sort2Handler,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 112
        }
      }), _react2.default.createElement(_semanticUiReact.Grid.Row, {
        __source: {
          fileName: _jsxFileName,
          lineNumber: 118
        }
      }, _react2.default.createElement('div', { style: { marginLeft: '15px', marginTop: '10px', marginRight: '15px' }, __source: {
          fileName: _jsxFileName,
          lineNumber: 119
        }
      }, this.renderCampaigns())))));
    }
  }], [{
    key: 'getInitialProps',
    value: function () {
      var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
        var structCount, allStructs;
        return _regenerator2.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return _factory2.default.methods.getStructCount().call();

              case 2:
                structCount = _context.sent;
                _context.next = 5;
                return _promise2.default.all( // get array of solidity Structs, trick
                Array(parseInt(structCount)).fill().map(function (element, index) {
                  return _factory2.default.methods.campaignStructs(index).call();
                }));

              case 5:
                allStructs = _context.sent;
                return _context.abrupt('return', { allStructs: allStructs });

              case 7:
              case 'end':
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function getInitialProps() {
        return _ref2.apply(this, arguments);
      }

      return getInitialProps;
    }()
  }]);

  return CampaignIndex;
}(_react.Component);

exports.default = CampaignIndex;

// Next also requires react component to be exported for each wep page file,
// as seen on line 17

//npm run dev => starts web app
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVua25vd24iXSwibmFtZXMiOlsiX2pzeEZpbGVOYW1lIiwiQ2FtcGFpZ25JbmRleCIsIl9Db21wb25lbnQiLCJfcmVmIiwiX3RlbXAiLCJfdGhpcyIsIl9yZXQiLCJfbGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsIkFycmF5IiwiX2tleSIsIl9fcHJvdG9fXyIsImNhbGwiLCJhcHBseSIsImNvbmNhdCIsInN0YXRlIiwic2VhcmNoVmFsdWUiLCJzb3J0QnkxIiwic29ydEJ5MiIsImtleSIsInZhbHVlIiwicmVuZGVyQ2FtcGFpZ25zIiwiX3N0YXRlIiwiaXRlbXMiLCJwcm9wcyIsImFsbFN0cnVjdHMiLCJtYXAiLCJyZXF1ZXN0IiwiaW5kZXgiLCJpbWFnZSIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJwYXJzZUludCIsIklkIiwid2lkdGgiLCJzdHlsZSIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJwb2ludGVyRXZlbnRzIiwiX19zb3VyY2UiLCJmaWxlTmFtZSIsImxpbmVOdW1iZXIiLCJoZWFkZXIiLCJOYW1lIiwibWV0YSIsInV0aWxzIiwiZnJvbVdlaSIsIlByaWNlIiwiaHJlZiIsImNyZWF0ZWQiLCJDcmVhdGVkRGF0ZSIsInNvcnQiLCJhIiwiYiIsInJldmVyc2UiLCJmaWx0ZXIiLCJpdGVtIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIkdyb3VwIiwicmVuZGVyIiwiX3RoaXMyIiwic2VhcmNoSGFuZGxlciIsImV2ZW50Iiwic2V0U3RhdGUiLCJ0YXJnZXQiLCJzb3J0MUhhbmRsZXIiLCJkYXRhIiwic29ydDJIYW5kbGVyIiwiSGVhZGVyIiwiUm93IiwibWFyZ2luUmlnaHQiLCJfcmVmMiIsIm1hcmsiLCJfY2FsbGVlIiwic3RydWN0Q291bnQiLCJ3cmFwIiwiX2NhbGxlZSQiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwibWV0aG9kcyIsImdldFN0cnVjdENvdW50Iiwic2VudCIsImFsbCIsImZpbGwiLCJlbGVtZW50IiwiY2FtcGFpZ25TdHJ1Y3RzIiwiYWJydXB0Iiwic3RvcCIsImdldEluaXRpYWxQcm9wcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7OztBQUNBOztBQUdBOzs7O0FBQ0E7Ozs7OztBQVRBLElBQUlBLGVBQWUsd0VBQW5CO0FBTUE7QUFDQTs7O0FBSUE7O0FBRUEsSUFBSUMsZ0JBQWdCLFVBQVVDLFVBQVYsRUFBc0I7QUFDeEMsMEJBQVVELGFBQVYsRUFBeUJDLFVBQXpCOztBQUVBLFdBQVNELGFBQVQsR0FBeUI7QUFDdkIsUUFBSUUsSUFBSjs7QUFFQSxRQUFJQyxLQUFKLEVBQVdDLEtBQVgsRUFBa0JDLElBQWxCOztBQUVBLGtDQUFnQixJQUFoQixFQUFzQkwsYUFBdEI7O0FBRUEsU0FBSyxJQUFJTSxPQUFPQyxVQUFVQyxNQUFyQixFQUE2QkMsT0FBT0MsTUFBTUosSUFBTixDQUFwQyxFQUFpREssT0FBTyxDQUE3RCxFQUFnRUEsT0FBT0wsSUFBdkUsRUFBNkVLLE1BQTdFLEVBQXFGO0FBQ25GRixXQUFLRSxJQUFMLElBQWFKLFVBQVVJLElBQVYsQ0FBYjtBQUNEOztBQUVELFdBQU9OLFFBQVFGLFNBQVNDLFFBQVEseUNBQTJCLElBQTNCLEVBQWlDLENBQUNGLE9BQU9GLGNBQWNZLFNBQWQsSUFBMkIsOEJBQXVCWixhQUF2QixDQUFuQyxFQUEwRWEsSUFBMUUsQ0FBK0VDLEtBQS9FLENBQXFGWixJQUFyRixFQUEyRixDQUFDLElBQUQsRUFBT2EsTUFBUCxDQUFjTixJQUFkLENBQTNGLENBQWpDLENBQVIsRUFBMkpMLEtBQXBLLEdBQTRLQSxNQUFNWSxLQUFOLEdBQWM7QUFDdk1DLG1CQUFhLEVBRDBMO0FBRXZNQyxlQUFTLFNBRjhMO0FBR3ZNQyxlQUFTO0FBSDhMLEtBQTFMLEVBSVpoQixLQUpJLEdBSUkseUNBQTJC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QUw7QUFDRWdFLDhCQUFjRyxTQUFTSyxJQUF2QjtBQUNBTCx5QkFBU0UsSUFBVCxHQUFnQixDQUFoQjtBQUNBLHVCQUFPLGtCQUFTSSxHQUFULEVBQWM7QUFDckI1RSxzQkFBTXVCLFNBQVM0QyxXQUFULENBQU4sRUFBNkJVLElBQTdCLEdBQW9DNUQsR0FBcEMsQ0FBd0MsVUFBVTZELE9BQVYsRUFBbUIzRCxLQUFuQixFQUEwQjtBQUNoRSx5QkFBTyxrQkFBUXNELE9BQVIsQ0FBZ0JNLGVBQWhCLENBQWdDNUQsS0FBaEMsRUFBdUNoQixJQUF2QyxFQUFQO0FBQ0QsaUJBRkQsQ0FETyxDQUFQOztBQUtGLG1CQUFLLENBQUw7QUFDRWEsNkJBQWFzRCxTQUFTSyxJQUF0QjtBQUNBLHVCQUFPTCxTQUFTVSxNQUFULENBQWdCLFFBQWhCLEVBQTBCLEVBQUVoRSxZQUFZQSxVQUFkLEVBQTFCLENBQVA7O0FBRUYsbUJBQUssQ0FBTDtBQUNBLG1CQUFLLEtBQUw7QUFDRSx1QkFBT3NELFNBQVNXLElBQVQsRUFBUDtBQW5CSjtBQXFCRDtBQUNGLFNBeEJNLEVBd0JKZixPQXhCSSxFQXdCSyxJQXhCTCxDQUFQO0FBeUJELE9BM0IyQyxDQUFoQyxDQUFaOztBQTZCQSxlQUFTZ0IsZUFBVCxHQUEyQjtBQUN6QixlQUFPbEIsTUFBTTVELEtBQU4sQ0FBWSxJQUFaLEVBQWtCUCxTQUFsQixDQUFQO0FBQ0Q7O0FBRUQsYUFBT3FGLGVBQVA7QUFDRCxLQW5DTTtBQUZKLEdBQUQsQ0FoS0o7O0FBd01BLFNBQU81RixhQUFQO0FBQ0QsQ0E5Tm1CLGtCQUFwQjs7a0JBZ09lQSxhOztBQUVmO0FBQ0E7O0FBRUEiLCJmaWxlIjoidW5rbm93biIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gJ2JhYmVsLXJ1bnRpbWUvcmVnZW5lcmF0b3InO1xuaW1wb3J0IF9Qcm9taXNlIGZyb20gJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlJztcbmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICdiYWJlbC1ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvcic7XG5pbXBvcnQgX09iamVjdCRnZXRQcm90b3R5cGVPZiBmcm9tICdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnO1xuaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJztcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSAnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJztcbnZhciBfanN4RmlsZU5hbWUgPSAnQzpcXFxcVXNlcnNcXFxcRGFuXFxcXERvd25sb2Fkc1xcXFxLcnlwdG9DYXJkelxcXFxQcm9qZWN0XFxcXHBhZ2VzXFxcXGluZGV4LmpzP2VudHJ5JztcbmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZmFjdG9yeSBmcm9tICcuLi9ldGhlcmV1bS9mYWN0b3J5JztcbmltcG9ydCB7IEZvcm0sIElucHV0LCBDYXJkLCBCdXR0b24sIEdyaWQsIE1lc3NhZ2UgfSBmcm9tICdzZW1hbnRpYy11aS1yZWFjdCc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTGF5b3V0U2VhcmNoJztcbmltcG9ydCB7IExpbmsgfSBmcm9tICcuLi9yb3V0ZXMnO1xuLy9pbXBvcnQgQ2FtcGFpZ24gZnJvbSAnLi4vZXRoZXJldW0vY2FtcGFpZ24nO1xuLy9pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHdlYjMgZnJvbSAnLi4vZXRoZXJldW0vd2ViMyc7XG5pbXBvcnQgU2VhcmNoU29ydFBhcnQgZnJvbSAnLi4vY29tcG9uZW50cy9TZWFyY2hTb3J0UGFydCc7XG5cbi8vIGNsYXNzIGJhc2VkIGNvbXBvbmVudFxuXG52YXIgQ2FtcGFpZ25JbmRleCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDYW1wYWlnbkluZGV4LCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDYW1wYWlnbkluZGV4KCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYW1wYWlnbkluZGV4KTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9yZWYgPSBDYW1wYWlnbkluZGV4Ll9fcHJvdG9fXyB8fCBfT2JqZWN0JGdldFByb3RvdHlwZU9mKENhbXBhaWduSW5kZXgpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHNlYXJjaFZhbHVlOiAnJyxcbiAgICAgIHNvcnRCeTE6ICdjcmVhdGVkJyxcbiAgICAgIHNvcnRCeTI6ICdMb3cgdG8gaGlnaCdcbiAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDYW1wYWlnbkluZGV4LCBbe1xuICAgIGtleTogJ3JlbmRlckNhbXBhaWducycsXG5cblxuICAgIC8vZHluYW1pY2FsbHkgY29tcHV0ZSByb3V0ZSBmb3IgZGVzY3JpcHRpb24gdGFnIGJlbG93XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNhbXBhaWducygpIHtcbiAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIHNvcnRCeTEgPSBfc3RhdGUuc29ydEJ5MSxcbiAgICAgICAgICBzb3J0QnkyID0gX3N0YXRlLnNvcnRCeTIsXG4gICAgICAgICAgc2VhcmNoVmFsdWUgPSBfc3RhdGUuc2VhcmNoVmFsdWU7XG5cbiAgICAgIC8vY29uc3QgYWNjb3VudHMgPSBhd2FpdCB3ZWIzLmV0aC5nZXRBY2NvdW50cygpO1xuICAgICAgLy9jb25zdCBvd25lckNhcmRzID0gYXdhaXQgZmFjdG9yeS5tZXRob2RzLmdldENhcmRzQnlPd25lcihhY2NvdW50c1swXSkuY2FsbCgpO1xuXG4gICAgICB2YXIgaXRlbXMgPSB0aGlzLnByb3BzLmFsbFN0cnVjdHMubWFwKGZ1bmN0aW9uIChyZXF1ZXN0LCBpbmRleCkge1xuICAgICAgICByZXR1cm4ge1xuXG4gICAgICAgICAgaW1hZ2U6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgc3JjOiAnaHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL2NyeXB0b2NhcmR6LWM1MDY2LmFwcHNwb3QuY29tLycgKyAocGFyc2VJbnQocmVxdWVzdC5JZCkgKyAxKSArICcucG5nJywgd2lkdGg6ICcxNTAnLCBzdHlsZTogeyBtYXJnaW5MZWZ0OiAnNzBweCcsIG1hcmdpblRvcDogJzE1cHgnLCBtYXJnaW5Cb3R0b206ICcxNXB4JywgcG9pbnRlckV2ZW50czogJ25vbmUnIH0sIF9fc291cmNlOiB7XG4gICAgICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsXG4gICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDY1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgaGVhZGVyOiByZXF1ZXN0Lk5hbWUsXG4gICAgICAgICAgbWV0YTogd2ViMy51dGlscy5mcm9tV2VpKHJlcXVlc3QuUHJpY2UsICdldGhlcicpICsgXCIgRVRIXCIsXG4gICAgICAgICAgaHJlZjogJy9jYW1wYWlnbnMvJyArIHJlcXVlc3QuSWQsXG4gICAgICAgICAgY3JlYXRlZDogcmVxdWVzdC5DcmVhdGVkRGF0ZVxuICAgICAgICAgIC8vZmx1aWQ6IHRydWUgIC8vIGNhdXNlcyBjYXJkcyB0byBnbyBmdWxsIHdpZHRoIG9mIGZyYW1lXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIGl0ZW1zLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgaWYgKGFbc29ydEJ5MV0gPiBiW3NvcnRCeTFdKSByZXR1cm4gMTtcbiAgICAgICAgaWYgKGFbc29ydEJ5MV0gPCBiW3NvcnRCeTFdKSByZXR1cm4gLTE7XG4gICAgICAgIGlmIChhW3NvcnRCeTFdID09PSBiW3NvcnRCeTFdKSByZXR1cm4gMDtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc29ydEJ5MiA9PT0gJ0hpZ2ggdG8gbG93JykgaXRlbXMucmV2ZXJzZSgpO1xuXG4gICAgICBpZiAoc2VhcmNoVmFsdWUgIT09ICcnKSB7XG4gICAgICAgIGl0ZW1zID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW0uaGVhZGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVmFsdWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYXJkLkdyb3VwLCB7IGl0ZW1zOiBpdGVtcywgX19zb3VyY2U6IHtcbiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDg4XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgc2VhcmNoVmFsdWUgPSB0aGlzLnN0YXRlLnNlYXJjaFZhbHVlO1xuXG4gICAgICB2YXIgc2VhcmNoSGFuZGxlciA9IGZ1bmN0aW9uIHNlYXJjaEhhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7IHNlYXJjaFZhbHVlOiBldmVudC50YXJnZXQudmFsdWUgfSk7XG4gICAgICB9O1xuICAgICAgdmFyIHNvcnQxSGFuZGxlciA9IGZ1bmN0aW9uIHNvcnQxSGFuZGxlcihldmVudCwgZGF0YSkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHsgc29ydEJ5MTogZGF0YS52YWx1ZSB9KTtcbiAgICAgIH07XG4gICAgICB2YXIgc29ydDJIYW5kbGVyID0gZnVuY3Rpb24gc29ydDJIYW5kbGVyKGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuc2V0U3RhdGUoeyBzb3J0QnkyOiBkYXRhLnZhbHVlIH0pO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIExheW91dCxcbiAgICAgICAge1xuICAgICAgICAgIF9fc291cmNlOiB7XG4gICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgICAgbGluZU51bWJlcjogMTAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgc3R5bGU6IHsgbWFyZ2luVG9wOiAnMjVweCcgfSwgX19zb3VyY2U6IHtcbiAgICAgICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSxcbiAgICAgICAgICAgICAgbGluZU51bWJlcjogMTAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgTWVzc2FnZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgX19zb3VyY2U6IHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDEwMlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgTWVzc2FnZS5IZWFkZXIsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfX3NvdXJjZToge1xuICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDEwM1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgJ1NpdGUgUmVxdWlyZW1lbnRzJ1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIF9fc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgbGluZU51bWJlcjogMTA0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAnUGxlYXNlIGJlIHVzaW5nIE1ldGFNYXNrIGFuZCB0aGUgUm9wc3RlbiBUZXN0IE5ldCB0byBpbnRlcmFjdCB3aXRoIHRoaXMgYXBwbGljYXRpb24uIE90aGVyd2lzZSBlcnJvcnMgbWF5IGJlIHRocm93bi4nXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2gzJyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgX19zb3VyY2U6IHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDEwOFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ01hcmtldHBsYWNlJ1xuICAgICAgICAgICksXG4gICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIEdyaWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIF9fc291cmNlOiB7XG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSxcbiAgICAgICAgICAgICAgICBsaW5lTnVtYmVyOiAxMTFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VhcmNoU29ydFBhcnQsIHtcbiAgICAgICAgICAgICAgc2VhcmNoSGFuZGxlcjogc2VhcmNoSGFuZGxlcixcbiAgICAgICAgICAgICAgc2VhcmNoVmFsdWU6IHNlYXJjaFZhbHVlLFxuICAgICAgICAgICAgICBzb3J0MUhhbmRsZXI6IHNvcnQxSGFuZGxlcixcbiAgICAgICAgICAgICAgc29ydDJIYW5kbGVyOiBzb3J0MkhhbmRsZXIsXG4gICAgICAgICAgICAgIF9fc291cmNlOiB7XG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSxcbiAgICAgICAgICAgICAgICBsaW5lTnVtYmVyOiAxMTJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBHcmlkLlJvdyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIF9fc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgbGluZU51bWJlcjogMTE4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHsgbWFyZ2luTGVmdDogJzE1cHgnLCBtYXJnaW5Ub3A6ICcxMHB4JywgbWFyZ2luUmlnaHQ6ICcxNXB4JyB9LCBfX3NvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBsaW5lTnVtYmVyOiAxMTlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FtcGFpZ25zKClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogJ2dldEluaXRpYWxQcm9wcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICAgIHZhciBzdHJ1Y3RDb3VudCwgYWxsU3RydWN0cztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeS5tZXRob2RzLmdldFN0cnVjdENvdW50KCkuY2FsbCgpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBzdHJ1Y3RDb3VudCA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Qcm9taXNlLmFsbCggLy8gZ2V0IGFycmF5IG9mIHNvbGlkaXR5IFN0cnVjdHMsIHRyaWNrXG4gICAgICAgICAgICAgICAgQXJyYXkocGFyc2VJbnQoc3RydWN0Q291bnQpKS5maWxsKCkubWFwKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkubWV0aG9kcy5jYW1wYWlnblN0cnVjdHMoaW5kZXgpLmNhbGwoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIGFsbFN0cnVjdHMgPSBfY29udGV4dC5zZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoJ3JldHVybicsIHsgYWxsU3RydWN0czogYWxsU3RydWN0cyB9KTtcblxuICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBnZXRJbml0aWFsUHJvcHMoKSB7XG4gICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ2V0SW5pdGlhbFByb3BzO1xuICAgIH0oKVxuICB9XSk7XG5cbiAgcmV0dXJuIENhbXBhaWduSW5kZXg7XG59KENvbXBvbmVudCk7XG5cbmV4cG9ydCBkZWZhdWx0IENhbXBhaWduSW5kZXg7XG5cbi8vIE5leHQgYWxzbyByZXF1aXJlcyByZWFjdCBjb21wb25lbnQgdG8gYmUgZXhwb3J0ZWQgZm9yIGVhY2ggd2VwIHBhZ2UgZmlsZSxcbi8vIGFzIHNlZW4gb24gbGluZSAxN1xuXG4vL25wbSBydW4gZGV2ID0+IHN0YXJ0cyB3ZWIgYXBwIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVua25vd24iXSwibmFtZXMiOlsiX2pzeEZpbGVOYW1lIiwiQ2FtcGFpZ25JbmRleCIsIl9Db21wb25lbnQiLCJfcmVmIiwiX3RlbXAiLCJfdGhpcyIsIl9yZXQiLCJfbGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsIkFycmF5IiwiX2tleSIsIl9fcHJvdG9fXyIsImNhbGwiLCJhcHBseSIsImNvbmNhdCIsInN0YXRlIiwic2VhcmNoVmFsdWUiLCJzb3J0QnkxIiwic29ydEJ5MiIsImtleSIsInZhbHVlIiwicmVuZGVyQ2FtcGFpZ25zIiwiX3N0YXRlIiwiaXRlbXMiLCJwcm9wcyIsImFsbFN0cnVjdHMiLCJtYXAiLCJyZXF1ZXN0IiwiaW5kZXgiLCJpbWFnZSIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJwYXJzZUludCIsIklkIiwid2lkdGgiLCJzdHlsZSIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJwb2ludGVyRXZlbnRzIiwiX19zb3VyY2UiLCJmaWxlTmFtZSIsImxpbmVOdW1iZXIiLCJoZWFkZXIiLCJOYW1lIiwibWV0YSIsInV0aWxzIiwiZnJvbVdlaSIsIlByaWNlIiwiaHJlZiIsImNyZWF0ZWQiLCJDcmVhdGVkRGF0ZSIsInNvcnQiLCJhIiwiYiIsInJldmVyc2UiLCJmaWx0ZXIiLCJpdGVtIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIkdyb3VwIiwicmVuZGVyIiwiX3RoaXMyIiwic2VhcmNoSGFuZGxlciIsImV2ZW50Iiwic2V0U3RhdGUiLCJ0YXJnZXQiLCJzb3J0MUhhbmRsZXIiLCJkYXRhIiwic29ydDJIYW5kbGVyIiwiSGVhZGVyIiwiUm93IiwibWFyZ2luUmlnaHQiLCJfcmVmMiIsIm1hcmsiLCJfY2FsbGVlIiwic3RydWN0Q291bnQiLCJ3cmFwIiwiX2NhbGxlZSQiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwibWV0aG9kcyIsImdldFN0cnVjdENvdW50Iiwic2VudCIsImFsbCIsImZpbGwiLCJlbGVtZW50IiwiY2FtcGFpZ25TdHJ1Y3RzIiwiYWJydXB0Iiwic3RvcCIsImdldEluaXRpYWxQcm9wcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7OztBQUNBOztBQUdBOzs7O0FBQ0E7Ozs7OztBQVRBLElBQUlBLGVBQWUsd0VBQW5CO0FBTUE7QUFDQTs7O0FBSUE7O0FBRUEsSUFBSUMsZ0JBQWdCLFVBQVVDLFVBQVYsRUFBc0I7QUFDeEMsMEJBQVVELGFBQVYsRUFBeUJDLFVBQXpCOztBQUVBLFdBQVNELGFBQVQsR0FBeUI7QUFDdkIsUUFBSUUsSUFBSjs7QUFFQSxRQUFJQyxLQUFKLEVBQVdDLEtBQVgsRUFBa0JDLElBQWxCOztBQUVBLGtDQUFnQixJQUFoQixFQUFzQkwsYUFBdEI7O0FBRUEsU0FBSyxJQUFJTSxPQUFPQyxVQUFVQyxNQUFyQixFQUE2QkMsT0FBT0MsTUFBTUosSUFBTixDQUFwQyxFQUFpREssT0FBTyxDQUE3RCxFQUFnRUEsT0FBT0wsSUFBdkUsRUFBNkVLLE1BQTdFLEVBQXFGO0FBQ25GRixXQUFLRSxJQUFMLElBQWFKLFVBQVVJLElBQVYsQ0FBYjtBQUNEOztBQUVELFdBQU9OLFFBQVFGLFNBQVNDLFFBQVEseUNBQTJCLElBQTNCLEVBQWlDLENBQUNGLE9BQU9GLGNBQWNZLFNBQWQsSUFBMkIsOEJBQXVCWixhQUF2QixDQUFuQyxFQUEwRWEsSUFBMUUsQ0FBK0VDLEtBQS9FLENBQXFGWixJQUFyRixFQUEyRixDQUFDLElBQUQsRUFBT2EsTUFBUCxDQUFjTixJQUFkLENBQTNGLENBQWpDLENBQVIsRUFBMkpMLEtBQXBLLEdBQTRLQSxNQUFNWSxLQUFOLEdBQWM7QUFDdk1DLG1CQUFhLEVBRDBMO0FBRXZNQyxlQUFTLFNBRjhMO0FBR3ZNQyxlQUFTO0FBSDhMLEtBQTFMLEVBSVpoQixLQUpJLEdBSUkseUNBQTJC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